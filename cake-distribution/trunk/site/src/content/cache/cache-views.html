<html>
<!--
 Copyright 2008, 2009 Kasper Nielsen
   Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
 
 Created on 5. March 2009 by Kasper Nielsen
 -->
  <head>
    <title>Cache Views</title>
    <meta name="short" content="Cache Views"/>
  </head>
  <body>
    <p>
    A cache view is the result of applying a mapper (function) on every entry in a cache.
    Only the object that mapper maps each entry to is visible be the user when he queries a cache view.
    The cache view is backed by the original cache, so changes to the original cache are reflected in
    the filtered view, and vice-versa (if the view supports mutating operations).
   </p>
   <p>
   The primary use for cache views are for querying the cache. For example, returning a set of all unique values
   in the cache, or returning the maximum value in the cache (assuming values are comparable).  
   </p>
   
   <h1 id="features">CacheView</h1>
    A CacheView is logical view over a  
    values(), keys(), entries()
    view()
    
    
    Cake supports a number of ways to query and filter the contents of a cache.
    Sorting, 
    Querying is performed by creating views of a Cache, much like you would create views in a database.
    Or the views that can be obtained by calling map.keySet()
    However, in cake there are no difference between a view and a query
    
    
    
    CacheView is a view that contains a set of CacheEntry instances.
    
    MapView is a virtual view of a Map with unique keys mapping to a value.
       
   
   <p>
   For example, when you call getAll(K... keys) instead of returning a map mapping each key to the corresponding value.
   The cache returns a CacheView which can be used to determine precisily the type of result that is needed.
   For example, assuming you are caching some webpages (String url-> webpage as a String) and you want to return the average
   length of 3 different webpages. If 
   If you working over a network this can be rather slow, because you need to fetch the pages to your local machine.
   Before you can do the calculation    
   Whenever a cache needs to return more then one cache entry, value a CacheView is returned instead.
   The user can then define exactly the type of result he 
   </p>
    In cake views are using for querying a cache.
    
    <h1 id="features">Simple Transformations</h1>

    <h1 id="features">Value and key views</h1>
    

    <h1 id="features">Filtering</h1>
      A filtered cache view represents a subset of the data contained in a cache.
      For example to create a cache view, all those cache entries where the string key starts with 'https'
<div class="Source Java"><pre>
Cache<String, String> c = new SynchronizedCache<String, String>();
Cache<String, String> secure = c.filter().onKey(new Predicate<String>() {
    public boolean op(String key) {return key.startsWith("https");}
});
</pre></div>    	
      Or from where the value is an Integer
       
      show example  
    The cache returned by the filter operation() is backed by the original cache, so changes to
    
    the old cache are reflected in the the new cache, and vice-versa.

      Filtering is the operations of restricting what data is in the much like you would use 
      the a 'WHERE' clause in SQL.

  	
    There are a number of restrictions on a cache views created by filter operations.
Views are 
<h1 id="getAll">getAll()</h1>
Another way to obtain a CacheView is to call <tt>getAll(keys)</tt> which will create a CacheView
over all values. Its probably easiest to see

For example, suppose you want to find out which choose the 5 biggest webpages.

getAllIn("www.google.com", .....).orderby(CacheEntry.SIZE).setLimit(1).keys().one();
For example, consider a cache will, gerne noget med reduce
    
    <h2 id="overhead">How many views can I create?</h2>
    <p>
    As many as you want! Creating a view is a very fast operation with almost
    no memory overhead. Basically a view cache is just the mapper . So you easily have thousands of
    views available at the same time. Even share them among multiple threads.
    </p>
    <h3 id="features">CacheView</h3>
    There two ways to optain CacheView. Either by calling cache.view() or cache.getAll().<a></a> 
    
  </body>
</html>
